---

- name: Make i3 config dir
  file:
    path: "{{ ansible_env.HOME }}/.config/i3"
    state: directory

- name: Install i3 config
  template:
    src: i3.config.j2
    dest: "{{ ansible_env.HOME }}/.config/i3/config"

- name: Install i3exit script
  template:
    src: i3exit.sh.j2
    dest: "{{ user_bin_dir }}/i3exit"
    mode: "u=rwx,g=,o="

- name: Make i3status config dir
  file:
    path: "{{ ansible_env.HOME }}/.config/i3status"
    state: directory

- name: Install i3status config
  template:
    src: i3status.config.j2
    dest: "{{ ansible_env.HOME }}/.config/i3status/config"

- name: Install i3 and support packages
  become: yes
  apt: name={{ item }} state=latest
  with_items:
    - i3
    - i3lock
